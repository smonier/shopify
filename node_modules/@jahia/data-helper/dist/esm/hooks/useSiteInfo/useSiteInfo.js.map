{"version":3,"names":["useQuery","SITE_INFO_QUERY","adaptSiteInfo","data","jcr","wsDefault","res","result","_objectSpread","site","languages","useSiteInfo","_ref","siteKey","displayLanguage","uiLanguage","variables","path","skipUILanguage","undefined","errorPolicy","siteInfo"],"sources":["useSiteInfo.ts"],"sourcesContent":["import {useQuery} from '@apollo/client';\nimport {SITE_INFO_QUERY} from './useSiteInfo.gql-queries';\n\nconst adaptSiteInfo = (data: any) => {\n    if (data && (data.jcr || data.wsDefault)) {\n        const res = data.jcr ? data.jcr.result : data.wsDefault.result;\n        if (res) {\n            return {...res.site};\n        }\n    }\n\n    return {\n        languages: []\n    };\n};\n\nexport const useSiteInfo = ({siteKey, displayLanguage, uiLanguage}: {siteKey: string, displayLanguage: string, uiLanguage: string}) => {\n    const variables = {\n        path: '/sites/' + siteKey,\n        displayLanguage,\n        skipUILanguage: true,\n        uiLanguage: ''\n    };\n\n    if (uiLanguage !== undefined) {\n        variables.skipUILanguage = false;\n        variables.uiLanguage = uiLanguage;\n    }\n\n    const res = useQuery(SITE_INFO_QUERY, {variables, errorPolicy: 'ignore'});\n\n    return {\n        ...res,\n        siteInfo: adaptSiteInfo(res.data)\n    };\n};\n"],"mappings":";;;AAAA,SAAQA,QAAQ,QAAO,gBAAgB;AACvC,SAAQC,eAAe;AAEvB,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,IAAS,EAAK;EACjC,IAAIA,IAAI,KAAKA,IAAI,CAACC,GAAG,IAAID,IAAI,CAACE,SAAS,CAAC,EAAE;IACtC,IAAMC,GAAG,GAAGH,IAAI,CAACC,GAAG,GAAGD,IAAI,CAACC,GAAG,CAACG,MAAM,GAAGJ,IAAI,CAACE,SAAS,CAACE,MAAM;IAC9D,IAAID,GAAG,EAAE;MACL,OAAAE,aAAA,KAAWF,GAAG,CAACG,IAAI;IACvB;EACJ;EAEA,OAAO;IACHC,SAAS,EAAE;EACf,CAAC;AACL,CAAC;AAED,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAAC,IAAA,EAA+G;EAAA,IAA1GC,OAAO,GAAAD,IAAA,CAAPC,OAAO;IAAEC,eAAe,GAAAF,IAAA,CAAfE,eAAe;IAAEC,UAAU,GAAAH,IAAA,CAAVG,UAAU;EAC7D,IAAMC,SAAS,GAAG;IACdC,IAAI,EAAE,SAAS,GAAGJ,OAAO;IACzBC,eAAe,EAAfA,eAAe;IACfI,cAAc,EAAE,IAAI;IACpBH,UAAU,EAAE;EAChB,CAAC;EAED,IAAIA,UAAU,KAAKI,SAAS,EAAE;IAC1BH,SAAS,CAACE,cAAc,GAAG,KAAK;IAChCF,SAAS,CAACD,UAAU,GAAGA,UAAU;EACrC;EAEA,IAAMT,GAAG,GAAGN,QAAQ,CAACC,eAAe,EAAE;IAACe,SAAS,EAATA,SAAS;IAAEI,WAAW,EAAE;EAAQ,CAAC,CAAC;EAEzE,OAAAZ,aAAA,CAAAA,aAAA,KACOF,GAAG;IACNe,QAAQ,EAAEnB,aAAa,CAACI,GAAG,CAACH,IAAI;EAAC;AAEzC,CAAC"}